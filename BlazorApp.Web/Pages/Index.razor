@page "/"

@inject HttpClient Http

<h1>Mind Behind</h1>

@if (items == null)
{
    <p>Loading...</p>
}
else
{
    <ul>
        @foreach (var item in items)
        {
            <li>
                <p>@item.id</p>
                <ol>
                    @foreach (var name in item.names)
                    {
                        <li>
                            <a href="@GetHref(item.id, name)" target="_blank">@name</a>
                        </li>
                    }
                </ol>
            </li>
        }
    </ul>
}

@code {
    private BlazorApp.Domain.Item[] items;

    protected override async Task OnInitializedAsync()
    {
        items = await Http.GetFromJsonAsync<BlazorApp.Domain.Item[]>("/items");
    }


    public string GetHref(string date, string name) =>
        $"/movie/{date}/{name}";
}

