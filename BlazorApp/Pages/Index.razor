@page "/"

@inject HttpClient Http

<h1>Mind Behind</h1>

@if (items == null)
{
    <p>Loading...</p>
}
else
{
    <ul>
        @foreach (var item in items)
        {
            <li>
                <p>@item.Id</p>
                <ol>
                    @foreach (var name in item.Names)
                    {
                        <li>
                            <a href="@GetHref(item.Id, name)" target="_blank">@name</a>
                        </li>
                    }
                </ol>
            </li>
        }
    </ul>
}

@code {
    private Item[] items;

    protected override async Task OnInitializedAsync()
    {
        items = await Http.GetFromJsonAsync<Item[]>("data/data.json");
    }

    public class Item
    {
        public string Id { get; set; }

        public string[] Names { get; set; }
    }

    public string GetHref(string date, string name) =>
        $"/movie/{date}/{name}";
}

